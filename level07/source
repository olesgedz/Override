#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void	clear_stdin() {
	char	c = 0;

	while (1) {
		c = getchar();
		if (c == '\n' || c == -1) {
			return;
		}
	}
}

int		get_unum() {
	unsigned int	x = 0;

	fflush(stdout);
	scanf("%u", &x);
	clear_stdin();
	return (x);
}


int		store_number(int *c) {
	int		number;
	int		index;

	printf(" Number: ");
	number = get_unum();
	printf(" Index: ");
	index = get_unum();

	if ((index % 3) && number >> 24 != 183) {
		c[index] = number;
		return (0);
	}

	puts(" *** ERROR! ***");
	puts("   This index is berved for wil!");
	puts(" *** ERROR! ***");

	return (1);
}

int		read_number(int *c) {
	int		number = 0;

	printf(" Index: ");
	number = get_unum();
	printf(" Number at data[%u] is %u\n", number, c[number]);

	return (0);
}

int		main(int ac, char **av, char **env) {
	char	a[20];
	int		b = 0;
	int 	c[25];

	while (*av != NULL) {
		memset(*av , 0, strlen(*av));
		argv++;
	}
	while (*env != NULL) {
		memset(*env, 0, strlen(*env));
		env++;
	}

	puts("----------------------------------------------------\n");
  puts("Welcome to wil's crappy number storage service!\n");
  puts("----------------------------------------------------\n");
  puts(" Commands:\n")
  puts("  store - store a number into the data storage\n");
  puts("  read  - read a number from the data storage\n");
  puts("  quit  - exit the program\n");
  puts("----------------------------------------------------\n");
  puts("  wil has berved some storage :>\n");
  puts("----------------------------------------------------\n")
	while (1) {
		printf("Input command: ");
		b = 1;
		fgets(a, 20, stdin);
		a[strlen(a) - 1] = '\0';

		if (strncmp(a, "store", 5) == 0) {
			b = store_number(c);
		} else if (strncmp(a, "read", 4) == 0) {
			b = read_number(c);
		} else if (strncmp(a, "quit", 4) == 0) {
			return (0);
		}

		if (b != 0) {
			printf(" Failed to do %s command\n", a);
		} else {
			printf(" Completed %s command successfully\n", a);
		}
		memset(a, 0, 20);
	}

	return (0);
}